---
import BaseHead from "@/components/BaseHead.astro";
import paperTexture from "@/assets/paper-texture.jpg";
import BorderDark from "@/assets/border-dark.svg";
import BorderLight from "@/assets/border-light.svg";
import Corner from "@/assets/corner.svg";

import ThemeIcon from "@/components/ThemeIcon.astro";
import LanguagePicker from "@/components/LanguagePicker.astro";

const { title, description } = Astro.props;
const { currentLocale } = Astro;
---

<!doctype html>
<html lang={currentLocale}>
    <head>
        <BaseHead title={title} description={description} />
        <style is:global>
            /* Modern CSS Reset */
            *,
            *::before,
            *::after {
                box-sizing: border-box;
            }

            * {
                margin: 0;
            }

            html {
                -webkit-text-size-adjust: 100%;
                text-size-adjust: 100%;
            }

            body {
                min-height: 100dvh;
                line-height: 1.5;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            img,
            picture,
            video,
            canvas,
            svg {
                display: block;
                max-width: 100%;
            }

            input,
            button,
            textarea,
            select {
                font: inherit;
            }

            p,
            h1,
            h2,
            h3,
            h4,
            h5,
            h6 {
                overflow-wrap: break-word;
            }
        </style>

        <style
            is:global
            define:vars={{
                paperTexture: `url("${paperTexture.src}")`,
                markBorder: `url("${BorderDark.src}")`,
                borderLight: `url("${BorderLight.src}")`,
            }}
        >
            @font-face {
                font-family: "Excalifont";
                src: url("../assets/fonts/Excalifont-Regular.woff2")
                    format("woff2");
                font-weight: normal;
                font-style: normal;
                font-display: swap;
            }

            @font-face {
                font-family: "Comic Shanns";
                src: url("../assets/fonts/comic-shanns.otf") format("opentype");
                font-weight: normal;
                font-style: normal;
                font-display: swap;
            }

            :root {
                --primary-bg: #f1f1f1;
                --primary-text: #444;
                --link-color: #549eff;
                --paper-opacity: 0.8;
            }

            :root {
                --bg-page: #fcfcfc;
                --bg-container: #ffffff;
                --border-color: #000000;
                --text-color: #000000;
                --accent-blue: #0066cc;
                --box-bg: transparent;
                --hover-bg: #f0f0f0;
            }

            :global(.dark) :root {
                --primary-bg: #333;
                --bg-page: #161e33;
                --bg-container: #10151d;
                --border-color: #4a5568;
                --text-color: #ffffff;
                --accent-blue: #549eff;
                --hover-bg: #1e293b;
            }

            html {
                font-family: "Comic Shanns", cursive, sans-serif;
            }

            body {
                line-height: 1.6;
                font-size: 18px;
                background-color: var(--primary-bg);
                color: var(--primary-text);
                position: relative;
                display: grid;
                place-items: center;
                height: 100dvh;
            }
            .mark {
                position: relative;

                border: 30px solid transparent;
                border-image-source: var(--borderLight);
                border-image-slice: 200;
                border-image-repeat: stretch;

                width: 100%;
                height: 100dvh;
            }

            .dark .mark {
                border-image-source: var(--markBorder);
                & svg {
                    fill: var(--text-color);
                }
            }

            body::before {
                content: "";
                position: absolute;
                inset: 0;
                background-image: var(--paperTexture);
                background-repeat: repeat;
                pointer-events: none;
                z-index: -1;
            }
            #mybutton {
                background-color: red;
            }

            html.dark {
                --primary-bg: #333;
                --primary-text: #eee;
                --paper-opacity: 0;
                --accent-blue: #549eff;

                & body::before {
                    filter: invert(1);
                }
            }

            html.dark a {
                color: var(--link-color);
            }

            h1 {
                font-size: 2.5rem;
                margin: 0 0 1rem 0;
                font-weight: bold;
                font-family: "Excalifont", sans-serif;
            }

            h2,
            h3,
            h4,
            h5,
            h6 {
                font-size: 1.5rem;
                font-family: "Excalifont", sans-serif;
                margin-bottom: 1rem;
            }

            p {
                text-wrap: balance;
            }

            .see-more {
                margin-top: auto;
                font-size: 0.9rem;
                color: var(--accent-blue);
                font-weight: bold;
                text-align: end;
                display: flex;
                justify-content: end;

                a {
                    text-decoration: none;
                }

                a:hover {
                    text-decoration: underline;
                    text-underline-offset: 3px;
                    text-decoration-thickness: 2px;
                }

                a::after {
                    content: " >";
                }
            }
            /* Responsive Adjustments */
            @media (max-width: 1000px) {
                body {
                    height: max-content;
                }
                .mark {
                    height: max-content;
                    border-width: 15px;
                }
            }
        </style>

        <!-- Google tag (gtag.js) -->
        <script
            async
            src="https://www.googletagmanager.com/gtag/js?id=G-WJSJQ78QYQ"
        ></script>
        <script is:inline>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("js", new Date());
            gtag("config", "G-WJSJQ78QYQ");
        </script>
    </head>
    <body>
        <style>
            .options {
                display: flex;
                width: 100px;
                /* background-color: rgba(0, 128, 128, 0.3); */
                position: absolute;
                top: 0;
                right: 0;
                z-index: 9999;
                gap: 0.5rem;
                padding: 0.8rem 1rem;
            }
        </style>
        <div class="options">
            <LanguagePicker />
            <ThemeIcon />
        </div>
        <div class="mark">
            <Corner
                style={{
                    position: "absolute",
                    // top: "-12px",
                    // right: "-15px",
                    top: "-25",
                    right: "-25",
                    zIndex: 1000,
                    width: "100px",
                    height: "auto",
                }}
            />
            <slot />
        </div>
    </body>
</html>
