---
import { getI18N } from "@/i18n";
import {
  getLangFromUrl,
  useTranslations,
  useTranslatedPath,
} from "@/i18n/utils.ts";

import mainBorder from "@/assets/main-border.svg";
import lineH1 from "@/assets/lines/line-horizontal-1.svg";
import lineH2 from "@/assets/lines/line-horizontal-2.svg";
import lineH3 from "@/assets/lines/line-horizontal-3.svg";
import lineH4 from "@/assets/lines/line-horizontal-4.svg";
import lineH5 from "@/assets/lines/line-horizontal-5.svg";
import LineVertical from "@/assets/lines/line-vertical.svg";
import LineHorizontal1 from "@/assets/lines/line-horizontal-3.svg";
import BentoLayout from "@/layouts/BentoLayout.astro";

// New Section Components
import BioSection from "../home/BioSection.astro";
import MenuSection from "../home/MenuSection.astro";
import ProjectsSection from "../home/ProjectsSection.astro";
import BlogSection from "../home/BlogSection.astro";
import VideosSection from "../home/VideosSection.astro";
import SocialSection from "../home/SocialSection.astro";
import FooterSection from "../home/FooterSection.astro";

const { currentLocale } = Astro;
const i18n = getI18N({ currentLocale });

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);
---

<BentoLayout title="Doneber" description={i18n.HOME.SHORT_DESCRIPTION}>
  <main>
    <div class="container">
      <BioSection
        shortDescription={i18n.HOME.SHORT_DESCRIPTION}
        fullDescription={i18n.ABOUT.DESCRIPTION}
      />
      <MenuSection />
      <ProjectsSection />
      <BlogSection />
      <VideosSection />
      <FooterSection />
      <SocialSection />
      <div class="line-vertical">
        <LineVertical />
      </div>
      <div class="line-horizontal-1">
        <LineHorizontal1 />
      </div>
    </div>
  </main>
</BentoLayout>

<style
  define:vars={{
    mainBorder: `url("${mainBorder.src}")`,
    lineH1: `url("${lineH1.src}")`,
    lineH2: `url("${lineH2.src}")`,
    lineH3: `url("${lineH3.src}")`,
    lineH4: `url("${lineH4.src}")`,
    lineH5: `url("${lineH5.src}")`,
  }}
>
  :root {
    --bg-page: #fcfcfc;
    --bg-container: #ffffff;
    --border-color: #000000;
    --text-color: #000000;
    --accent-blue: #0066cc;
    --box-bg: transparent;
    --hover-bg: #f0f0f0;
  }

  :global(.dark) :root {
    --bg-page: #161e33;
    --bg-container: #10151d;
    --border-color: #4a5568;
    --text-color: #ffffff;
    --accent-blue: #60a5fa;
    --hover-bg: #1e293b;
  }

  main {
    max-width: 1200px;
    margin: 0 auto;
    transition:
      background-color 0.3s,
      color 0.3s;
  }

  .container {
    display: grid;
    grid-template-columns: 1.3fr 5px 0.7fr;
    grid-template-rows: auto;
    gap: 0;
    overflow: hidden;
  }

  :global(.box) {
    padding: 1.5rem;
    border-bottom: none;
    border-right: none;
    display: flex;
    flex-direction: column;
    position: relative;
  }

  /* SVG borders for each box */
  :global(.bio) {
    background-image: var(--lineH1);
    background-repeat: no-repeat;
    background-position: bottom;
    background-size: 100% auto;
  }

  :global(.projects) {
    background-image: var(--lineH3);
    background-repeat: no-repeat;
    background-position: bottom;
    background-size: 100% auto;
  }

  :global(.blog) {
    background-image: var(--lineH4);
    background-repeat: no-repeat;
    background-position: bottom;
    background-size: 100% auto;
  }

  :global(.social) {
    background-image: var(--lineH5);
    background-repeat: no-repeat;
    background-position: bottom;
    background-size: 100% auto;
  }

  /* Grid Areas */
  .container {
    grid-template-areas:
      "bio line-vertical menu"
      "bio line-vertical line-horizontal-1"
      "bio line-vertical projects"
      "blog line-vertical projects"
      "blog line-vertical social"
      "videos line-vertical social"
      "videos line-vertical footer";
  }

  :global(.bio) {
    grid-area: bio;
  }
  :global(.menu) {
    grid-area: menu;
  }
  :global(.projects) {
    grid-area: projects;
  }
  :global(.blog) {
    grid-area: blog;
  }
  :global(.videos) {
    grid-area: videos;
  }
  :global(.footer) {
    grid-area: footer;
  }
  :global(.social) {
    grid-area: social;
  }
  .line-vertical {
    grid-area: line-vertical;
  }
  .line-horizontal-1 {
    grid-area: line-horizontal-1;
  }

  /* Responsive Adjustments */
  @media (max-width: 900px) {
    .container {
      grid-template-columns: 1fr;
      grid-template-areas:
        "bio"
        "menu"
        "line-horizontal-1"
        "projects"
        "blog"
        "videos"
        "social"
        "footer";
    }
  }
</style>
